/*! jquery.db 2013-12-24 */
!function(jQuery){"use strict";function a(a,b){this.db=a,this.tableName=b,this.maxResults=void 0,this.firstResult=0,this.restrictions=[],this.order=[],this.setMaxResults=function(a){return this.maxResults=a,this},this.setFirstResult=function(a){return this.firstResult=a,this},this.addOrder=function(a){return this.order.push(a),this},this.add=function(a){return this.restrictions.push(a),this},this.list=function(a,b){var c="SELECT _ROWID_, * FROM "+this.tableName;return this._executeCriteria(c,a,b),this},this.count=function(a,b){var c="SELECT COUNT(*) AS count FROM "+this.tableName;return this._executeCriteria(c,a,b),this},this.remove=function(a,b){var c="DELETE FROM "+this.tableName;return this._executeCriteria(c,a,b),this},this._getWhereClause=function(a){var b=[];return jQuery.each(this.restrictions,function(c,d){b.push(d.expr);var e;for(e=0;e<d.args.length;e+=1)a.push(d.args[e])}),b.join(" AND ")},this._executeCriteria=function(a,b,c){var d=[];if(this.restrictions.length>0){var e=this._getWhereClause(d);a=a+" WHERE "+e}this.order.length>0&&(jQuery.each(this.order,function(){}),a=a+" ORDER BY "+this.order.join(",")),"Number"==typeof this.maxResults&&(a=a+" LIMIT "+this.maxResults),this.firstResult>0&&(a=a+" OFFSET "+this.firstResult);var f=function(a,c){void 0!==b&&b(a,c)},g=function(a,b){void 0!==c&&c(a,b)},h=function(b){b.executeSql(a,d,f,g)};this.db.database.transaction(h)}}function b(a,c){b.prototype.isAscending=!0,this.property=a,void 0!==c&&(this.isAscending=c),this.toString=function(){var a;return a=this.isAscending?"ASC":"DESC",this.property+" "+a}}function c(a,b){c.prototype.args=[],this.expr=a,void 0!==b&&(this.args=b)}function d(a){c.prototype.message="JQuery Database Exception",void 0!==a&&(this.message=a),this.toString=function(){return this.message}}function e(b){function c(a,b,c,d,e){var f=function(a,b){void 0!==d&&d(a,b)},g=function(a,b){void 0!==e&&e(a,b)},h=function(a){c=c||[],a.executeSql(b,c,f,g)};a.transaction(h)}this.typeName=jQuery.db.typeName,this.restriction=jQuery.db.restriction,this.database=b,this.tables=function(a){var b=function(b,c){var d,e,f=[];for(e=c.rows.length,d=0;e>d;d+=1){var g=c.rows.item(d);"__WebKitDatabaseInfoTable__"!==g.name&&"sqlite_sequence"!==g.name&&f.push(g.name)}"function"==typeof a&&a(f)},d="SELECT name FROM sqlite_master WHERE type = ?",e=function(){};return c(this.database,d,["table"],b,e),this},this.createTable=function(a){a=a||{};var b=a.name,e=[];jQuery.each(a.columns,function(a,b){if("object"==typeof b){var c=b.name;if(b.hasOwnProperty("type")){var f=b.type.toUpperCase();if(f!==jQuery.db.typeName.text&&f!==jQuery.db.typeName.number&&f!==jQuery.db.typeName.int&&f!==jQuery.db.typeName.integer&&f!==jQuery.db.typeName.real)throw new d('Unknown type, "'+f+'"');c=c+" "+f}b.hasOwnProperty("constraint")&&(c=c+" "+b.constraint),e.push(c)}else e.push(b)});var f;a.hasOwnProperty("dropOrIgnore")&&("drop"===a.dropOrIgnore.toLowerCase()?f="drop":"ignore"===a.dropOrIgnore.toLowerCase()&&(f="ignore"));var g;a.hasOwnProperty("success")&&(g=a.success);var h;a.hasOwnProperty("error")&&(h=a.error);var i="CREATE TABLE ";return"ignore"===f&&(i+="IF NOT EXISTS "),a.hasOwnProperty("constraints")&&jQuery.each(a.constraints,function(a,b){e.push(b)}),i=i+b+" ("+e.join(",")+")","drop"===f&&c(this.database,"DROP TABLE IF EXISTS "+b,[]),c(this.database,i,[],g,h),this},this.dropTable=function(a){a=a||{};var b,d=a.name,e=a.hasOwnProperty("ignore")&&a.ignore;a.hasOwnProperty("success")&&(b=a.success);var f;a.hasOwnProperty("error")&&(f=a.error);var g="DROP TABLE ";return e&&(g+="IF EXISTS "),g+=d,c(this.database,g,[],b,f),this},this.insert=function(a,b){b=b||{};var d=[],e=[],f=[];jQuery.each(b.data,function(a,b){f.push("?"),d.push(b),e.push(a)});var g;b.hasOwnProperty("success")&&(g=b.success);var h;b.hasOwnProperty("error")&&(h=b.error);var i="INSERT INTO "+a+" ("+e.join(",")+") VALUES ("+f.join(",")+")";return c(this.database,i,d,g,h),this},this.criteria=function(b){return new a(this,b)}}jQuery.db=function(a,b,c,d,f){var g;if(window.openDatabase){var h=window.openDatabase(a,b,c,d,f);h?g=new e(h):(window.console,g=void 0)}else g=void 0;return g},jQuery.db.typeName={text:"TEXT",numeric:"NUM","int":"INT",integer:"INTEGER",real:"REAL",none:""},jQuery.db.columnConstraint={primaryKey:function(){},notNull:function(){},unique:function(){},check:function(){},defaultValue:function(){},collate:function(){},foreignKey:function(){}},jQuery.db.order=function(a,c){return new b(a,c)},jQuery.extend(jQuery.db.order,{asc:function(a){return jQuery.db.order(a,"ASC")},desc:function(a){return jQuery.db.order(a,"DESC")}}),jQuery.db.restriction=function(a,b){return new c(a,b)},jQuery.extend(jQuery.db.restriction,{allEq:function(a){var b=[],d=[];return jQuery.each(a,function(a,c){b.push(a+" = ?"),d.push(c)}),new c("("+b.join(" AND ")+")",d)},and:function(a,b){var d=[],e=a._getWhereClause(d),f=b._getWhereClause(d);return new c("("+e+") AND ("+f+")",d)},between:function(a,b,d){return new c(a+" BETWEEN ? AND ?",[b,d])},eq:function(a,b){return new c(a+" = ?",[b])},eqProperty:function(a,b){return new c(a+" = "+b)},ge:function(a,b){return new c(a+" >= ?",[b])},geProperty:function(a,b){return new c(a+" >= "+b)},gt:function(a,b){return new c(a+" > ?",[b])},gtProperty:function(a,b){return new c(a+" > "+b)},idEq:function(a){return new c("_ROWID_ = ?",[a])},"in":function(a,b){var d=[];return jQuery.each(b,function(){d.push("?")}),new c(a+" in ("+d.join(", ")+")",b)},isEmpty:function(a){return new c("("+a+" IS NULL OR "+a+" = '')")},isNotEmpty:function(a){return new c("("+a+" IS NOT NULL AND "+a+" != '')")},isNotNull:function(a){return new c(a+" IS NOT NULL")},isNull:function(a){return new c(a+" IS NULL")},le:function(a,b){return new c(a+" <= ?",[b])},leProperty:function(a,b){return new c(a+" <= "+b)},like:function(a,b){return new c(a+" LIKE ?",[b])},lt:function(a,b){return new c(a+" < ?",[b])},ltProperty:function(a,b){return new c(a+" < "+b)},ne:function(a,b){return new c(a+" != ?",[b])},neProperty:function(a,b){return new c(a+" != "+b)},not:function(a){var b=[],d=a._getWhereClause(b);return new c("NOT ("+d+")",b)},or:function(a,b){var d=[],e=a._getWhereClause(d),f=b._getWhereClause(d);return new c("("+e+") OR ("+f+")",d)}})}(jQuery);
//# sourceMappingURL=build/jquery.db.0.0.1.map